!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["@huameow/request-openai"]={})}(this,(function(e){"use strict";function t(e,t){if(e)return t&&"object"==typeof e?JSON.stringify(e):e||""}function r(e,t){if(e){if("object"==typeof e&&t){const t=new FormData;for(const r in e)if(e.hasOwnProperty(r)){const n=e[r];n in File?t.append(r,n,n.name):Array.isArray(n)?n.forEach((e=>{t.append(r,e)})):t.append(r,n[r])}return t}return e}}function n(e,t){const r=new Headers(t);return e.forEach(((e,t)=>{r.append(t,e)})),r}class o{constructor(e){this.configuration=e}configure(e){this.configuration=Object.assign(Object.assign({},this.configuration),e)}async createRequest(e){const{baseURL:t,apiVersion:r="v1",headersInit:o}=this.configuration,a=function(e){return e.endsWith("/")?e.slice(0,-1):e}(function(e){return e.startsWith("/")?e.slice(1):e}(r));return fetch(function(e,t){return new URL(e,t||"https://api.openai.com")}(`/${a}/${e.url}`,t),{method:e.method,headers:n(new Headers(e.headers),o),body:e.body})}createChatCompletion(e,r){return this.createRequest({url:"chat/completions",method:"POST",headers:{"Content-Type":"application/json"},body:t(e,r)})}createCompletion(e,r){return this.createRequest({url:"completions",method:"POST",headers:{"Content-Type":"application/json"},body:t(e,r)})}createEdit(e,r){return{url:"edits",method:"POST",headers:{"Content-Type":"application/json"},body:t(e,r)}}createEmbedding(e,r){return{url:"embeddings",method:"POST",headers:{"Content-Type":"application/json"},body:t(e,r)}}createImage(e,t){return{url:"images/generations",method:"POST",headers:{"Content-Type":"multipart/form-data"},body:r(e,t)}}createImageEdit(e,t){return{url:" /images/edits",method:"POST",headers:{"Content-Type":"multipart/form-data"},body:r(e,t)}}createImageVariation(e,t){return{url:" /images/variations",method:"POST",headers:{"Content-Type":"multipart/form-data"},body:r(e,t)}}createModeration(e,t){return{url:" /moderations",method:"POST",headers:{"Content-Type":"multipart/form-data"},body:r(e,t)}}createTranscription(e,t){return{url:"audio/transcriptions",method:"POST",headers:{"Content-Type":"multipart/form-data"},body:r(e,t)}}createTranslation(e,t){return{url:"audio/translations",method:"POST",headers:{"Content-Type":"multipart/form-data"},body:r(e,t)}}static build(e){return new o(e)}}async function a(e){if(e.ok){const t=await e.json(),r=t.error;return r?Promise.reject(new Error(r.message||"请求失败")):t}return Promise.reject(new Error(e.statusText))}class i{constructor(e){this.api=o.build(e)}async createCompletion(e){return a(await this.api.createCompletion(e,!0))}async createChatCompletion(e){return a(await this.api.createChatCompletion(e,!0))}static builder(e){return new i(Object.assign({baseURL:window.location.origin},e))}}e.default=class{constructor(e){return i.builder({baseURL:e.baseURL,headersInit:{Authorization:`Bearer ${e.apiKey}`,"OpenAI-Organization":e.apiOrg||""}})}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=request-open-ai.umd.js.map
